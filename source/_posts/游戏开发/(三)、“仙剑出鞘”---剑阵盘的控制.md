---
title: (三)、“仙剑出鞘”---剑阵盘的控制
category: [游戏开发]
tags: 
    - cocos 
    - 微信小游戏
    - 仙剑
date: 2020-11-13 13:59:31
---

### 主要代码
```ts
this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);
        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove , this);
        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);
        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);
        // this.mEnableTouch = true;
        console.log("mEnableTouch on");
    }

```


```ts
     
    onTouchMove (event) {
        var touches = event.getTouches();
        var touchLoc = touches[0].getLocation();
        // this.mHookMoveToPos = this.node.parent.convertToNodeSpaceAR(touchLoc);
        // console.log('touchLoc : ', touchLoc);

        let toX:Number = touchLoc.x - Number(this.preX) 
        var toY:Number = touchLoc.y - Number(this.preY)
        this.preX = touchLoc.x
        this.preY = touchLoc.y
        console.log('touchLoc.x',touchLoc.x)
        console.log('preX',this.preX)
        console.log('touchLoc.y',touchLoc.y)
        console.log('preY',this.preY)
        if( toX > 0 ) {
            console.log(" > 0")
            this.mPan.angle +=2
        }
        if( toX < 0 ) {
            console.log(" < 0")
            this.mPan.angle -=2
        }

    }
```

### 主要涉及的cocos函数

#### 1、event.getTouches()
获取触碰点


#### 2、cc.Node.EventType.TOUCH_MOVE
事件类型
